<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Agendas</title>

    <!--CDN BOOTSTRAP-->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />

    <!--CDN UNICONS-->
    <link
      rel="stylesheet"
      href="https://unicons.iconscout.com/release/v4.0.8/css/line.css"
    />

    <!--CDN DATATABLE-->
    <link
    href="https://cdn.datatables.net/v/bs5/jszip-3.10.1/dt-2.1.8/b-3.2.0/b-html5-3.2.0/b-print-3.2.0/datatables.min.css"
    rel="stylesheet"
    />

    <!-- Estilo local -->
    <link rel="stylesheet" th:href="@{/css/styles.css}" />

    <style></style>
  </head>
  <body>
    <!------------------------+Header+------------------------>
    <header></header>

    <!--------------------------+Navbar+-------------------------->
    <div th:replace="fragments/navbar :: navbar"></div>

    <!------------------------+Cotéudo do site+------------------------>

    <!--Container que realizará a organização/divisão entre a sidebar e o main-->
    <div class="wrapper">

    <!------------------------+SIDEBAR+------------------------>
    <div th:replace="fragments/sidebar :: sidebar"></div>


      <!------------------------+Main+------------------------>
      <main>
        <div class="my-main p-3 d-flex">
            <div class="container-fluid">

            <!-- Título da página -->
              <div class="row w-100">
                <h1>Agendas</h1>
                <hr>
              </div>

            <div class="row w-100" style="min-height: 95%;">
              <div class="col-12">
                <form action="" class="row mx-auto g-3">

                 <p>Ações:</p>   
                <!-- Seção para botões de ação -->
                <div class="col-6">
                <div class="btn-group">
                    <button type="button" class="btn btn-success" data-bs-toggle="collapse" data-bs-target="#inserir-tarefa" aria-expanded="false" aria-controls="inserir-tarefa" id="btn-inserir-tarefa">Inserir</button>
                    <button type="button" class="btn btn-warning" data-bs-toggle="collapse" data-bs-target="#editar-tarefa" aria-expanded="false" aria-controls="editar-tarefa" id="btn-editar-tarefa">Editar</button>
                </div>

                </div>

                <div class="col-6">
                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">

                        <div class="acoes-inserir d-none" id="acoes-inserir">
                            <button type="button" class="btn btn-success" aria-expanded="false" aria-controls="" id="btn-confirmar-edicao">Confirmar</button>
                            <button type="button" class="btn btn-danger" aria-expanded="false" aria-controls="" id="btn-cancelar-edicao">Cancelar</button>
                        </div>

                        <div class="acoes-editar d-none" id="acoes-editar">
                            <button type="button" class="btn btn-success" data-bs-toggle="collapse" aria-expanded="false" aria-controls="inserir-tarefa" id="btn-confirmar-edicao">Confirmar</button>
                            <button type="button" class="btn btn-danger" data-bs-toggle="collapse" aria-expanded="false" aria-controls="editar-tarefa" id="btn-cancelar-edicao">Cancelar</button> 
                        </div>

                    </div>
                </div>
 

                </div>

                <!--Formulario Inserir-->
                <div class="row collapse mb-3 mt-3" id="inserir-tarefa">
                    <div class="col-2 mb-3">
                        <!-- Campo para exibir nome da transportadora -->
                        <label for="nome-transportadora" class="form-label">Transportadora:</label>
                        <input type="text" id="nome-transportadora" class="form-control" placeholder="Nome da Transportadora" aria-label="nome-transportadora">
                    </div>
                    <div class="col-2 mb-3">
                        <!-- Campo para exibir tipo de vinculo -->
                        <label for="tipo-vinculo" class="form-label">Vínculo:</label>
                        <select class="form-select form-control" aria-label="tipo-vinculo" id="tipo-vinculo">
                          <option selected>Selecione...</option>
                          <option value="1">Agregado</option>
                          <option value="2">Fixo</option>
                          <option value="3">Terceiro</option>
                        </select>
                    </div>

                    <div class="col-2 mb-3">
                        <!-- Campo para exibir placa do veiculo -->
                        <label for="placa-veiculo" class="form-label">Placa do Veículo:</label>
                        <input type="text" id="placa-veiculo" class="form-control" placeholder="Placa do Veículo" aria-label="placa-veiculo">
                    </div>
                    <div class="col-2 mb-3">
                        <!-- Campo para exibir placa da carreta -->
                        <label for="placa-carreta" class="form-label">Placa da Carreta:</label>
                        <input type="text" id="placa-carreta" class="form-control" placeholder="Placa da Carreta" aria-label="placa-carreta">
                    </div>
                    <div class="col-2 mb-3">
                        <!-- Campo para exibir status da consulta -->
                        <label for="status-consulta" class="form-label">Status da Consulta:</label>
                        <select class="form-select form-control" aria-label="status-consulta" id="status-consulta">
                            <option selected>Selecione...</option>
                            <option value="1">Aprovado</option>
                            <option value="2">Reprovado</option>
                            <option value="3">Em Análise</option>
                          </select>
                    </div>
                    <div class="col-2 mb-3">
                        <!-- Campo para exibir condutor -->
                        <label for="condutor" class="form-label">Condutor:</label>
                        <input type="text" id="condutor" class="form-control" placeholder="Nome do Condutor" aria-label="condutor">
                    </div>
                    <div class="col-2 mb-3">
                        <!-- Campo para exibir observação -->
                        <label for="observacao" class="form-label">Observação:</label>
                        <input type="text" id="observacao" class="form-control" placeholder="Descrição" aria-label="observacao">
                    </div>
                    <div class="col-2 mb-3">
                        <!-- Campo para exibir sinal TCEL -->
                        <label for="sinal-tcel" class="form-label">Sinal TCEL:</label>
                        <input type="text" id="sinal-tcel" class="form-control" placeholder="Sinal TCEL" aria-label="sinal-tcel">
                    </div>
                    <div class="col-2 mb-3">
                        <!-- Campo para exibir sinal BRRISK -->
                        <label for="sinal-brrisk" class="form-label">Sinal BRRISK:</label>
                        <input type="text" id="sinal-brrisk" class="form-control" placeholder="Sinal BRRISK" aria-label="sinal-brrisk">
                    </div>
                    <div class="col-2 mb-3">
                        <!-- Campo para exibir status da checklist -->
                        <label for="status-checklist" class="form-label">Status da Checklist:</label>
                        <select class="form-select form-control" aria-label="status-checklist" id="status-checklist">
                            <option selected>Selecione...</option>
                            <option value="1">Aprovado</option>
                            <option value="2">Reprovado</option>
                            <option value="3">Aguardando</option>
                          </select>
                    </div>
                    <div class="col-2 mb-3">
                        <!-- Campo para exibir rota -->
                        <label for="rota" class="form-label">Rota:</label>
                        <input type="text" id="rota" class="form-control" placeholder="Rota" aria-label="rota">
                    </div>      
                    <div class="col-2 mb-3">
                        <!-- Campo para exibir SM -->
                        <label for="sm" class="form-label">SM:</label>
                        <input type="text" id="sm" class="form-control" placeholder="SM" aria-label="sm">
                    </div>   
                    
                    <!--BOTAO CONFIRMAR-->
                </div>

                <!--Formulario Editar-->
                <div class="row collapse mb-3 mt-3" id="editar-tarefa">
                    <div class="col-2 mb-3">
                        <!-- Campo para exibir data de inclusao (apenas leitura) -->
                        <label for="data-inclusao" class="form-label">Data de Inclusão:</label>
                        <input type="date" id="data-inclusao" class="form-control" aria-label="data-inclusao" disabled readonly>
                    </div>
                    <div class="col-2 mb-3">
                        <!-- Campo para exibir nome da transportadora -->
                        <label for="nome-transportadora" class="form-label">Transportadora:</label>
                        <input type="text" id="data-inclusao" class="form-control" placeholder="Nome da Transportadora" aria-label="data-inclusao">
                    </div>
                    <div class="col-2 mb-3">
                        <!-- Campo para exibir tipo de vinculo -->
                        <label for="tipo-vinculo" class="form-label">Vínculo:</label>
                        <select class="form-select form-control" aria-label="tipo-vinculo" id="tipo-vinculo">
                          <option selected>Selecione...</option>
                          <option value="1">Agregado</option>
                          <option value="2">Fixo</option>
                          <option value="3">Terceiro</option>
                        </select>
                    </div>

                    <div class="col-2 mb-3">
                        <!-- Campo para exibir placa do veiculo -->
                        <label for="placa-veiculo" class="form-label">Placa do Veículo:</label>
                        <input type="text" id="placa-veiculo" class="form-control" placeholder="Placa do Veículo" aria-label="placa-veiculo">
                    </div>
                    <div class="col-2 mb-3">
                        <!-- Campo para exibir placa da carreta -->
                        <label for="placa-carreta" class="form-label">Placa da Carreta:</label>
                        <input type="text" id="placa-carreta" class="form-control" placeholder="Placa da Carreta" aria-label="placa-carreta">
                    </div>
                    <div class="col-2 mb-3">
                        <!-- Campo para exibir status da consulta -->
                        <label for="status-consulta" class="form-label">Status da Consulta:</label>
                        <select class="form-select form-control" aria-label="status-consulta" id="status-consulta">
                            <option selected>Selecione...</option>
                            <option value="1">Aprovado</option>
                            <option value="2">Reprovado</option>
                            <option value="3">Em Análise</option>
                          </select>
                    </div>
                    <div class="col-2 mb-3">
                        <!-- Campo para exibir condutor -->
                        <label for="condutor" class="form-label">Condutor:</label>
                        <input type="text" id="condutor" class="form-control" placeholder="Nome do Condutor" aria-label="condutor">
                    </div>
                    <div class="col-2 mb-3">
                        <!-- Campo para exibir observação -->
                        <label for="observacao" class="form-label">Observação:</label>
                        <input type="text" id="observacao" class="form-control" placeholder="Descrição" aria-label="observacao">
                    </div>
                    <div class="col-2 mb-3">
                        <!-- Campo para exibir sinal TCEL -->
                        <label for="sinal-tcel" class="form-label">Sinal TCEL:</label>
                        <input type="text" id="sinal-tcel" class="form-control" placeholder="Sinal TCEL" aria-label="sinal-tcel">
                    </div>
                    <div class="col-2 mb-3">
                        <!-- Campo para exibir sinal BRRISK -->
                        <label for="sinal-brrisk" class="form-label">Sinal BRRISK:</label>
                        <input type="text" id="sinal-brrisk" class="form-control" placeholder="Sinal BRRISK" aria-label="sinal-brrisk">
                    </div>
                    <div class="col-2 mb-3">
                        <!-- Campo para exibir status da checklist -->
                        <label for="status-checklist" class="form-label">Status da Checklist:</label>
                        <select class="form-select form-control" aria-label="status-checklist" id="status-checklist">
                            <option selected>Selecione...</option>
                            <option value="1">Aprovado</option>
                            <option value="2">Reprovado</option>
                            <option value="3">Aguardando</option>
                          </select>
                    </div>
                    <div class="col-2 mb-3">
                        <!-- Campo para exibir rota -->
                        <label for="rota" class="form-label">Rota:</label>
                        <input type="text" id="rota" class="form-control" placeholder="Rota" aria-label="rota">
                    </div>      
                    <div class="col-2 mb-3">
                        <!-- Campo para exibir SM -->
                        <label for="sm" class="form-label">SM:</label>
                        <input type="text" id="sm" class="form-control" placeholder="SM" aria-label="sm">
                    </div>   
                    <div class="col-2 mb-3">
                        <!-- Campo para exibir usuario (apenas leitura) -->
                        <label for="usuario" class="form-label">Usuario:</label>
                        <input type="text" id="usuario" class="form-control" placeholder="Usuário"  aria-label="usuario" disabled readonly>
                    </div>      
                </div>

                <hr>
                  
               <!--DATATABLE-->
                  <div class="col-12">
                    <div class="data_table">
                      <table id="datatable" class="table">
                        <thead>
                          <tr>
                            <th>#</th>
                            <th>Data de Inclusão</th>
                            <th>Tipo Serviço</th>
                            <th>Vínculo</th>
                            <th>Placa do Veículo</th>
                            <th>Cor do Veículo</th>
                            <th>Modelo do Veículo</th>
                            <th>Condutor</th>
                            <th>Observação</th>
                            <th>Sinal TCELL</th>
                            <th>Sinal BRRISK</th>
                            <th>SM</th>
                            <th>Rota</th>
                            <th>Data de Alteração</th>
                            <th>CNH Condutor</th>
                          </tr>
                        </thead>
                        <tbody>
                            <tr th:each="d, iStat : ${detalhes}">
                              <td class="text-center align-middle">
                                <input class="form-check-input" type="checkbox" th:id="'select-consulta-' + ${iStat.index}" />
                              </td>
                              <td th:text="${#dates.format(d.dataInclusaoAgenda, 'dd/MM/yyyy HH:mm')}">-</td>
                              <td th:text="${d.tipoServicoTransportadora}">-</td>
                              <td th:text="${d.tipoVinculoTransportadora}">-</td>
                              <td th:text="${d.placaVeiculo}">-</td>
                              <td th:text="${d.corVeiculo}">-</td>
                              <td th:text="${d.modeloVeiculo}">-</td>
                              <td th:text="${d.nomeCondutor}">-</td>
                              <td th:text="${d.observacaoAgenda}">-</td>
                              <td th:text="${d.sinalTcell}">-</td>
                              <td th:text="${d.sinalBrrisk}">-</td>
                              <td th:text="${d.sm}">-</td>
                              <td th:text="${d.rotaAgenda}">-</td>
                              <td th:text="${#dates.format(d.dataAlteracaoAgenda, 'dd/MM/yyyy HH:mm')}">-</td>
                              <td th:text="${d.cnhCondutor}">-</td>
                            </tr>

                         </tbody>
                      </table>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!------------------------+Footer+------------------------>
    <footer></footer>

    <!--JS-->
    <!--CDN BOOTSTRAP JS-->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>

    <!--JQUERY CDN-->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
      integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <!--CDN DATATABLE-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/v/bs5/jszip-3.10.1/dt-2.1.8/b-3.2.0/b-html5-3.2.0/b-print-3.2.0/datatables.min.js"></script>

    <!--MY JS-->
    <script th:src="@{/js/script.js}"></script>
    <script src="@{/js/datatable.js}"></script>

    <script>
      // Selecionando os botões e formulários
           const btnInserir = document.querySelector('#btn-inserir-tarefa');
           const btnEditar = document.querySelector('#btn-editar-tarefa');
           const inserirTarefa = document.querySelector('#inserir-tarefa');
           const editarTarefa = document.querySelector('#editar-tarefa');
           const acoesEditar = document.querySelector('#acoes-inserir');
           const acoesInserir = document.querySelector('#acoes-editar');
   
           // Função para controlar a exibição do formulário Inserir
           btnInserir.addEventListener('click', () => {
               if (!btnInserir.classList.contains('collapsed')) {
   
                   acoesInserir.classList.remove('d-none');
   
                   if(btnEditar.classList.contains('btn-outline-warning')){
                   //remover estilo do botao editar, caso usuario clique no botao inserir
                     btnEditar.classList.remove('btn-outline-warning');
                     btnEditar.classList.add('btn-warning');
                   }
   
   
                   //alterar estilo do botao inserir para ativado
                   btnInserir.classList.remove('btn-success');
                   btnInserir.classList.add('btn-outline-success');
   
   
                 if(editarTarefa.classList.contains('show')){
                    editarTarefa.classList.remove('show');
                 }
   
                 if(!acoesEditar.classList.contains('d-none')){
                   acoesEditar.classList.add('d-none');
                 }
               }else if(btnInserir.classList.contains('collapsed')){
                   acoesInserir.classList.add('d-none');
   
                   if(btnInserir.classList.contains('btn-outline-success')){
                     
                     //alterar estilo do botao inserir para desativado
                     btnInserir.classList.remove('btn-outline-success');
                     btnInserir.classList.add('btn-success');
                   }
               }
           });
   
   
           // Função para controlar a exibição do formulário Editar
           btnEditar.addEventListener('click', () => {
               if (!btnEditar.classList.contains('collapsed')) {
   
                   acoesEditar.classList.remove('d-none');
   
                   //remover estilo do botao inserir, caso usuario clique no botao editar
                   if(btnInserir.classList.contains('btn-outline-success')){
                     btnInserir.classList.remove('btn-outline-success');
                     btnInserir.classList.add('btn-success');
                   }
   
                   //alterar estilo do botao editar para ativado
                   btnEditar.classList.remove('btn-warning');
                   btnEditar.classList.add('btn-outline-warning');
   
                 if(inserirTarefa.classList.contains('show')){
                    inserirTarefa.classList.remove('show');
                 }
   
                 if(!acoesInserir.classList.contains('d-none')){
                   acoesInserir.classList.add('d-none');
                 }
               }else if(btnEditar.classList.contains('collapsed')){
                   acoesEditar.classList.add('d-none');
   
                   if(btnEditar.classList.contains('btn-outline-warning')){
                     //alterar estilo do botao editar para desativado
                     btnEditar.classList.remove('btn-outline-warning');
                     btnEditar.classList.add('btn-warning');
                   }
   
               }
               
           });
   
           //CheckBox
               // Obter todos os checkboxes
               const checkboxes = document.querySelectorAll('#select-consulta');
   
               // Adicionar um ouvinte de evento para cada checkbox
               checkboxes.forEach((checkbox) => {
               checkbox.addEventListener('change', function () {
               // Quando um checkbox é marcado, desmarque os outros
               checkboxes.forEach((otherCheckbox) => {
                   if (otherCheckbox !== this) {
                       otherCheckbox.checked = false; // Desmarcar outros checkboxes
                       // Remover a classe de destaque de todas as linhas
                       otherCheckbox.closest('tr').classList.remove('table-primary');
                   }
               });
   
               // Encontrar a linha pai do checkbox (tr)
               const row = this.closest('tr');
   
               // Adicionar ou remover a classe 'table-primary' dependendo do estado do checkbox
               if (this.checked) {
               row.classList.add('table-primary');
               } else {
               row.classList.remove('table-primary');
               }
               });
               });
   
               
   
       </script>

  </body>
</html>
